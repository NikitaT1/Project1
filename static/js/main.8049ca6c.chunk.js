(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{37:function(t,e,n){t.exports=n(77)},42:function(t,e,n){},7:function(t,e,n){},77:function(t,e,n){"use strict";n.r(e);var o=n(0),a=n.n(o),r=n(33),s=n.n(r),i=(n(42),n(1)),c=n(10),l=n(3),d=n(2),u=n(4),p=(n(7),n(11)),f=function(t){function e(){var t,n;Object(i.a)(this,e);for(var o=arguments.length,r=new Array(o),s=0;s<o;s++)r[s]=arguments[s];return(n=Object(l.a)(this,(t=Object(d.a)(e)).call.apply(t,[this].concat(r)))).state={error:!1,title:""},n.onAddItemClick=function(){var t=n.state.title;""===t?n.setState({error:!0}):n.setState({error:!1,title:""}),n.props.addItem(t)},n.onTitleChanged=function(t){n.setState({error:!1,title:t.currentTarget.value})},n.onKeyPress=function(t){"Enter"===t.key&&n.onAddItemClick()},n.render=function(){var t=n.state.error?"error":"";return a.a.createElement("div",{className:"todoList-newTaskForm"},a.a.createElement("input",{type:"text",placeholder:"New task name",className:t,onChange:n.onTitleChanged,onKeyPress:n.onKeyPress,value:n.state.title}),a.a.createElement("button",{onClick:n.onAddItemClick},"Add"))},n}return Object(u.a)(e,t),e}(a.a.Component),k=n(8),T=n.n(k),h=n(16),m=n(9),v=n.n(m).a.create({baseURL:"https://social-network.samuraijs.com/api/1.0/todo-lists",withCredentials:!0,headers:{"API-KEY":"1f7d7956-460f-4c20-a95b-d50d82e17d88"}}),O={createTask:function(t,e){return v.post("/".concat(t,"/tasks"),{title:e})},createTodoList:function(t){return v.post("/",{title:t})},uploadTodolists:function(){return v.get()},deleteTodoList:function(t){return v.delete("/".concat(t))},deleteTask:function(t){return v.delete("/tasks/".concat(t))},getTasks:function(t){return v.get("/".concat(t,"/tasks"))},updateTasks:function(t){return v.put("/tasks/",t,{withCredentials:!0,headers:{"API-KEY":"1f7d7956-460f-4c20-a95b-d50d82e17d88"}})}};function b(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,o)}return n}function C(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?b(n,!0).forEach(function(e){Object(p.a)(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):b(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}var g="Todolist/Reducer/ADD-TASK",j="Todolist/Reducer/DEL_TASK",y={todoLists:[],tasks:[]},E=function(t,e){return function(n){O.deleteTask(e).then(function(o){n(function(t,e){return{type:j,todolistId:t,taskId:e}}(t,e))})}},L=function(t,e){return function(n){O.createTask(t,e).then(function(e){var o=e.data.data.item;n(function(t,e){return{type:g,newTask:t,todolistId:e}}(o,t))})}},w=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"Todolist/Reducer/SET_TODOLIST":return C({},t,{todoLists:e.todolists.map(function(t){return C({},t,{tasks:[]})})});case"TodoList/Reducer/SET_TASKS":return C({},t,{todoLists:t.todoLists.map(function(t){return t.id===e.todoListId?C({},t,{tasks:e.allTasks}):t})});case"Todolist/Reducer/ADD-TODOLIST":return C({},t,{todoLists:[].concat(Object(h.a)(t.todoLists),[e.newTodolist])});case g:return C({},t,{todoLists:t.todoLists.map(function(t){return t.id===e.todolistId?C({},t,{tasks:[e.newTask].concat(Object(h.a)(t.tasks))}):t})});case"Todolist/Reducer/CHANGE-TASK":return C({},t,{todoLists:t.todoLists.map(function(t){return t.id===e.todolistId?C({},t,{tasks:t.tasks.map(function(t){return t.id===e.taskId?C({},t,{},e.obj):t})}):t})});case"Todolist/Reducer/DEL-TODOLIST":return C({},t,{todoLists:t.todoLists.filter(function(t){return t.id!==e.todolistId})});case j:return C({},t,{todoLists:t.todoLists.map(function(t){return t.id===e.todolistId?C({},t,{tasks:t.tasks.filter(function(t){return t.id!==e.taskId})}):t})});default:return t}},S=function(t){function e(){var t,n;Object(i.a)(this,e);for(var o=arguments.length,r=new Array(o),s=0;s<o;s++)r[s]=arguments[s];return(n=Object(l.a)(this,(t=Object(d.a)(e)).call.apply(t,[this].concat(r)))).deleteTodolist=function(){n.props.deleteTodolist(n.props.id)},n.render=function(){return a.a.createElement("div",null,a.a.createElement("h3",{className:"todoList-header__title"},n.props.title," ",a.a.createElement("button",{onClick:n.deleteTodolist},"X")))},n}return Object(u.a)(e,t),e}(a.a.Component),A=T()(null,function(t){return{deleteTodolist:function(e){var n=function(t){return function(e){O.deleteTodoList(t).then(function(n){e(function(t){return{type:"Todolist/Reducer/DEL-TODOLIST",todolistId:t}}(t))})}}(e);t(n)}}})(S),I=function(t){function e(){var t,n;Object(i.a)(this,e);for(var o=arguments.length,r=new Array(o),s=0;s<o;s++)r[s]=arguments[s];return(n=Object(l.a)(this,(t=Object(d.a)(e)).call.apply(t,[this].concat(r)))).render=function(){return a.a.createElement("div",{className:"todoList-header"},a.a.createElement(A,{title:n.props.title,id:n.props.id}),a.a.createElement(f,{addItem:n.props.onTaskAdded}))},n}return Object(u.a)(e,t),e}(a.a.Component),D=function(t){function e(){var t,n;Object(i.a)(this,e);for(var o=arguments.length,r=new Array(o),s=0;s<o;s++)r[s]=arguments[s];return(n=Object(l.a)(this,(t=Object(d.a)(e)).call.apply(t,[this].concat(r)))).state={editMode:!1,taskTitle:n.props.task.title},n.onIsDoneChanged=function(t){var e=t.currentTarget.checked?2:0;n.props.onTaskStatusChanged(n.props.task.id,e)},n.activateEditMode=function(){n.setState({editMode:!0})},n.deactivateEditMode=function(){n.setState({editMode:!1}),n.props.onTaskTitleChanged(n.props.task.id,n.state.taskTitle)},n.onTitleChanged=function(t){n.setState({taskTitle:t.currentTarget.value})},n.delTask=function(){n.props.delTaskCall(n.props.id,n.props.task.id)},n.render=function(){var t=2===n.props.task.status?"todoList-task done":"todoList-task";return a.a.createElement("div",{className:t},a.a.createElement("input",{type:"checkbox",checked:2===n.props.task.status,onChange:n.onIsDoneChanged}),n.state.editMode?a.a.createElement("input",{onBlur:n.deactivateEditMode,autoFocus:!0,value:n.state.taskTitle,onChange:n.onTitleChanged}):a.a.createElement("span",{onClick:n.activateEditMode}," ",n.props.task.title),", priority: ",n.props.task.priority," ",a.a.createElement("button",{onClick:n.delTask},"X"))},n}return Object(u.a)(e,t),e}(a.a.Component),P=function(t){function e(){var t,n;Object(i.a)(this,e);for(var o=arguments.length,r=new Array(o),s=0;s<o;s++)r[s]=arguments[s];return(n=Object(l.a)(this,(t=Object(d.a)(e)).call.apply(t,[this].concat(r)))).render=function(){var t=n.props.tasks.map(function(t){return a.a.createElement(D,{task:t,id:n.props.id,onTaskStatusChanged:n.props.onTaskStatusChanged,onTaskTitleChanged:n.props.onTaskTitleChanged,delTaskCall:n.props.delTaskCall})});return a.a.createElement("div",{className:"todoList-tasks"},t)},n}return Object(u.a)(e,t),e}(a.a.Component),F=function(t){function e(){var t,n;Object(i.a)(this,e);for(var o=arguments.length,r=new Array(o),s=0;s<o;s++)r[s]=arguments[s];return(n=Object(l.a)(this,(t=Object(d.a)(e)).call.apply(t,[this].concat(r)))).state={isHidden:!1},n.onAllFilterClick=function(){n.props.onFilterChanged("All")},n.onCompletedFilterClick=function(){n.props.onFilterChanged("Completed")},n.onActiveFilterClick=function(){n.props.onFilterChanged("Active")},n.onShowFiltersClick=function(){n.setState({isHidden:!1})},n.onHideFiltersClick=function(){n.setState({isHidden:!0})},n.render=function(t){var e="All"===n.props.filterValue?"filter-active":"",o="Completed"===n.props.filterValue?"filter-active":"",r="Active"===n.props.filterValue?"filter-active":"";return a.a.createElement("div",{className:"todoList-footer"},!n.state.isHidden&&a.a.createElement("div",null,a.a.createElement("button",{onClick:n.onAllFilterClick,className:e},"All"),a.a.createElement("button",{onClick:n.onCompletedFilterClick,className:o},"Completed"),a.a.createElement("button",{onClick:n.onActiveFilterClick,className:r},"Active")),!n.state.isHidden&&a.a.createElement("span",{onClick:n.onHideFiltersClick},"Hide"),n.state.isHidden&&a.a.createElement("span",{onClick:n.onShowFiltersClick},"Show"))},n}return Object(u.a)(e,t),e}(a.a.Component);function N(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,o)}return n}var R=function(t){function e(t){var n;return Object(i.a)(this,e),(n=Object(l.a)(this,Object(d.a)(e).call(this,t))).restoreState=function(){n.props.setTasks(n.props.id)},n.nextTaskId=0,n.state={filterValue:"All"},n.onTaskAdded=function(t){n.props.addTask(n.props.id,t)},n.onFilterChanged=function(t){n.setState({filterValue:t})},n.onTaskStatusChanged=function(t,e){n.changeTask(t,{status:e})},n.onTaskTitleChanged=function(t,e){n.changeTask(t,{title:e})},n.changeTask=function(t,e){var o=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?N(n,!0).forEach(function(e){Object(p.a)(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):N(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}({},n.props.tasks.find(function(e){return e.id===t}),{},e);O.updateTasks(o).then(function(o){n.props.updateTask(t,e,n.props.id)})},n.delTaskCall=function(t,e){n.props.delTaskCall(t,e)},n.render=function(){var t=n.props.tasks,e=void 0===t?[]:t;return a.a.createElement("div",{className:"todoList"},a.a.createElement(I,{onTaskAdded:n.onTaskAdded,title:n.props.title,id:n.props.id}),a.a.createElement(P,{id:n.props.id,onTaskStatusChanged:n.onTaskStatusChanged,onTaskTitleChanged:n.onTaskTitleChanged,delTaskCall:n.delTaskCall,tasks:e.filter(function(t){return"All"===n.state.filterValue||("Active"===n.state.filterValue?!1===t.isDone:"Completed"===n.state.filterValue?!0===t.isDone:void 0)})}),a.a.createElement(F,{onFilterChanged:n.onFilterChanged,filterValue:n.state.filterValue}))},n.newTasksTitileRef=a.a.createRef(),n}return Object(u.a)(e,t),Object(c.a)(e,[{key:"componentDidMount",value:function(){this.restoreState()}}]),e}(a.a.Component),H=T()(null,function(t){return{addTask:function(e,n){var o=L(e,n);t(o)},updateTask:function(e,n,o){var a=function(t,e,n){return{type:"Todolist/Reducer/CHANGE-TASK",taskId:t,obj:e,todolistId:n}}(e,n,o);t(a)},delTaskCall:function(e,n){var o=E(e,n);t(o)},setTasks:function(e){var n=function(t){return function(e){O.getTasks(t).then(function(n){var o=n.data.items;e(function(t,e){return{type:"TodoList/Reducer/SET_TASKS",allTasks:t,todoListId:e}}(o,t))})}}(e);t(n)}}})(R),K=function(t){function e(){var t,n;Object(i.a)(this,e);for(var o=arguments.length,r=new Array(o),s=0;s<o;s++)r[s]=arguments[s];return(n=Object(l.a)(this,(t=Object(d.a)(e)).call.apply(t,[this].concat(r)))).nextTaskId=5,n.state={todolists:[]},n.addTodoList=function(t){n.props.addTodoList(t)},n.restoreState=function(){n.props.setTodoLists()},n.render=function(){var t=n.props.todoLists.map(function(t){return a.a.createElement(H,{id:t.id,title:t.title,tasks:t.tasks})});return a.a.createElement(a.a.Fragment,null,a.a.createElement("div",null,a.a.createElement(f,{addItem:n.addTodoList})),a.a.createElement("div",{className:"App"},t))},n}return Object(u.a)(e,t),Object(c.a)(e,[{key:"componentDidMount",value:function(){this.restoreState()}}]),e}(a.a.Component),M=T()(function(t){return{todoLists:t.todoLists}},function(t){return{addTodoList:function(e){var n,o=(n=e,function(t){O.createTodoList(n).then(function(e){var n=e.data.data.item;t({type:"Todolist/Reducer/ADD-TODOLIST",newTodolist:n})})});t(o)},setTodoLists:function(){t(function(t){O.uploadTodolists().then(function(e){var n={type:"Todolist/Reducer/SET_TODOLIST",todolists:e.data};t(n)})})}}})(K);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var V=n(35),_=n.n(V),x=n(12),B=n(36),G=Object(x.createStore)(w,Object(x.applyMiddleware)(B.a));window.store=G;var J=G;s.a.render(a.a.createElement(_.a,{store:J},a.a.createElement(M,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(t){t.unregister()})}},[[37,1,2]]]);
//# sourceMappingURL=main.8049ca6c.chunk.js.map