(this["webpackJsonp01-todolist"]=this["webpackJsonp01-todolist"]||[]).push([[0],{104:function(t,e,n){t.exports=n(229)},109:function(t,e,n){},19:function(t,e,n){},229:function(t,e,n){"use strict";n.r(e);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var a=n(0),o=n.n(a),r=n(42),i=n.n(r),s=(n(109),n(7)),c=n(43),l=n(9),u=n(8),d=n(10),p=(n(19),n(6)),f=function(t){function e(){var t,n;Object(s.a)(this,e);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(l.a)(this,(t=Object(u.a)(e)).call.apply(t,[this].concat(r)))).state={error:!1,title:""},n.onAddItemClick=function(){var t=n.state.title;""===t?n.setState({error:!0}):n.setState({error:!1,title:""}),n.props.addItem(t)},n.onTitleChanged=function(t){n.setState({error:!1,title:t.currentTarget.value})},n.onKeyPress=function(t){"Enter"===t.key&&n.onAddItemClick()},n.render=function(){var t=n.state.error?"error":"";return o.a.createElement("div",{className:"todoList-newTaskForm"},o.a.createElement("input",{type:"text",placeholder:"New task name",className:t,onChange:n.onTitleChanged,onKeyPress:n.onKeyPress,value:n.state.title}),o.a.createElement("button",{onClick:n.onAddItemClick},"Add"))},n}return Object(d.a)(e,t),e}(o.a.Component),h=n(12),m=n(32),k=n.n(m),T=n(63),b=n(66),C=n(33),v=n.n(C),O=v.a.create({baseURL:"https://social-network.samuraijs.com/api/1.0/todo-lists",withCredentials:!0,headers:{"API-KEY":"1f7d7956-460f-4c20-a95b-d50d82e17d88"}}),j=function(t,e){return O.post("/".concat(t,"/tasks"),{title:e})},E=function(t){return O.post("/",{title:t})},g=function(){return O.get()},A=function(t){return O.delete("/".concat(t))},L=function(t){return O.delete("/tasks/".concat(t))},w=function(t){return O.get("/".concat(t,"/tasks"))},y=function(t){return O.put("/tasks/",t,{withCredentials:!0,headers:{"API-KEY":"1f7d7956-460f-4c20-a95b-d50d82e17d88"}})},S=function(t,e,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return v.a.post("https://social-network.samuraijs.com/api/1.0/auth/login",{email:t,password:e,rememberMe:n,captcha:a},{withCredentials:!0,headers:{"API-KEY":"1f7d7956-460f-4c20-a95b-d50d82e17d88"}})},I=function(){return v.a.get("https://social-network.samuraijs.com/api/1.0/auth/me",{withCredentials:!0,headers:{"API-KEY":"1f7d7956-460f-4c20-a95b-d50d82e17d88"}})},F=function(){return v.a.get("https://social-network.samuraijs.com/api/1.0/auth/security/get-captcha-url",{withCredentials:!0})},R="Todolist/Reducer/ADD-TODOLIST",N="Todolist/Reducer/ADD-TASK",D="Todolist/Reducer/CHANGE-TASK",M="Todolist/Reducer/DEL-TODOLIST",_="Todolist/Reducer/DEL_TASK",H="Todolist/Reducer/SET_TODOLIST",K="TodoList/Reducer/SET_TASKS",x={todoLists:[],tasks:[],isAuth:!1,captchaUrl:null},V=function(t){return{type:"GET_CAPTCHA_URL_SUCCESS",data:{captchaUrl:t}}},P=function(){return function(t){g().then((function(e){var n,a=(n=e.data,{type:H,todolists:n});t(a)}))}},U=function(t){return function(e){A(t).then((function(n){e(function(t){return{type:M,todolistId:t}}(t))}))}},G=function(t){return function(e){E(t).then((function(t){var n=t.data.data.item;e({type:R,newTodolist:n})}))}},Y=function(t,e){return function(n){L(e).then((function(a){n(function(t,e){return{type:_,todolistId:t,taskId:e}}(t,e))}))}},B=function(t,e){return function(n){j(t,e).then((function(e){var a=e.data.data.item;n(function(t,e){return{type:N,newTask:t,todolistId:e}}(a,t))}))}},J=function(t){return function(e){w(t).then((function(n){var a=n.data.items;e(function(t,e){return{type:K,allTasks:t,todoListId:e}}(a,t))}))}},W=function(){return function(){var t=Object(T.a)(k.a.mark((function t(e){return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,I();case 2:0===t.sent.data.resultCode&&e({type:"LOGIN_FREE"});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},X=function(){return function(){var t=Object(T.a)(k.a.mark((function t(e){var n,a;return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,F();case 2:n=t.sent,a=n.data.url,e(V(a));case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},$=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case H:return Object(p.a)({},t,{todoLists:e.todolists.map((function(t){return Object(p.a)({},t,{tasks:[]})}))});case K:return Object(p.a)({},t,{todoLists:t.todoLists.map((function(t){return t.id===e.todoListId?Object(p.a)({},t,{tasks:e.allTasks}):t}))});case R:return Object(p.a)({},t,{todoLists:[].concat(Object(b.a)(t.todoLists),[e.newTodolist])});case N:return Object(p.a)({},t,{todoLists:t.todoLists.map((function(t){return t.id===e.todolistId?Object(p.a)({},t,{tasks:[e.newTask].concat(Object(b.a)(t.tasks))}):t}))});case D:return Object(p.a)({},t,{todoLists:t.todoLists.map((function(t){return t.id===e.todolistId?Object(p.a)({},t,{tasks:t.tasks.map((function(t){return t.id===e.taskId?Object(p.a)({},t,{},e.obj):t}))}):t}))});case M:return Object(p.a)({},t,{todoLists:t.todoLists.filter((function(t){return t.id!==e.todolistId}))});case _:return Object(p.a)({},t,{todoLists:t.todoLists.map((function(t){return t.id===e.todolistId?Object(p.a)({},t,{tasks:t.tasks.filter((function(t){return t.id!==e.taskId}))}):t}))});case"LOGIN_FREE":return Object(p.a)({},t,{isAuth:!0});case"GET_CAPTCHA_URL_SUCCESS":return Object(p.a)({},t,{},e.data);default:return t}},q=function(t){function e(){var t,n;Object(s.a)(this,e);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(l.a)(this,(t=Object(u.a)(e)).call.apply(t,[this].concat(r)))).deleteTodolist=function(){n.props.deleteTodolist(n.props.id)},n.render=function(){return o.a.createElement("div",null,o.a.createElement("h3",{className:"todoList-header__title"},n.props.title," ",o.a.createElement("button",{onClick:n.deleteTodolist},"X")))},n}return Object(d.a)(e,t),e}(o.a.Component),z=Object(h.b)(null,(function(t){return{deleteTodolist:function(e){var n=U(e);t(n)}}}))(q),Q=function(t){function e(){var t,n;Object(s.a)(this,e);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(l.a)(this,(t=Object(u.a)(e)).call.apply(t,[this].concat(r)))).render=function(){return o.a.createElement("div",{className:"todoList-header"},o.a.createElement(z,{title:n.props.title,id:n.props.id}),o.a.createElement(f,{addItem:n.props.onTaskAdded}))},n}return Object(d.a)(e,t),e}(o.a.Component),Z=function(t){function e(){var t,n;Object(s.a)(this,e);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(l.a)(this,(t=Object(u.a)(e)).call.apply(t,[this].concat(r)))).state={editMode:!1,taskTitle:n.props.task.title},n.onIsDoneChanged=function(t){var e=t.currentTarget.checked?2:0;n.props.onTaskStatusChanged(n.props.task.id,e)},n.activateEditMode=function(){n.setState({editMode:!0})},n.deactivateEditMode=function(){n.setState({editMode:!1}),n.props.onTaskTitleChanged(n.props.task.id,n.state.taskTitle)},n.onTitleChanged=function(t){n.setState({taskTitle:t.currentTarget.value})},n.delTask=function(){n.props.delTaskCall(n.props.id,n.props.task.id)},n.render=function(){var t=2===n.props.task.status?"todoList-task done":"todoList-task";return o.a.createElement("div",{className:t},o.a.createElement("input",{type:"checkbox",checked:2===n.props.task.status,onChange:n.onIsDoneChanged}),n.state.editMode?o.a.createElement("input",{onBlur:n.deactivateEditMode,autoFocus:!0,value:n.state.taskTitle,onChange:n.onTitleChanged}):o.a.createElement("span",{onClick:n.activateEditMode}," ",n.props.task.title),", priority: ",n.props.task.priority," ",o.a.createElement("button",{onClick:n.delTask},"X"))},n}return Object(d.a)(e,t),e}(o.a.Component),tt=function(t){function e(){var t,n;Object(s.a)(this,e);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(l.a)(this,(t=Object(u.a)(e)).call.apply(t,[this].concat(r)))).render=function(){var t=n.props.tasks.map((function(t){return o.a.createElement(Z,{task:t,id:n.props.id,onTaskStatusChanged:n.props.onTaskStatusChanged,onTaskTitleChanged:n.props.onTaskTitleChanged,delTaskCall:n.props.delTaskCall})}));return o.a.createElement("div",{className:"todoList-tasks"},t)},n}return Object(d.a)(e,t),e}(o.a.Component),et=function(t){function e(){var t,n;Object(s.a)(this,e);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(l.a)(this,(t=Object(u.a)(e)).call.apply(t,[this].concat(r)))).state={isHidden:!1},n.onAllFilterClick=function(){n.props.onFilterChanged("All")},n.onCompletedFilterClick=function(){n.props.onFilterChanged("Completed")},n.onActiveFilterClick=function(){n.props.onFilterChanged("Active")},n.onShowFiltersClick=function(){n.setState({isHidden:!1})},n.onHideFiltersClick=function(){n.setState({isHidden:!0})},n.render=function(t){var e="All"===n.props.filterValue?"filter-active":"",a="Completed"===n.props.filterValue?"filter-active":"",r="Active"===n.props.filterValue?"filter-active":"";return o.a.createElement("div",{className:"todoList-footer"},!n.state.isHidden&&o.a.createElement("div",null,o.a.createElement("button",{onClick:n.onAllFilterClick,className:e},"All"),o.a.createElement("button",{onClick:n.onCompletedFilterClick,className:a},"Completed"),o.a.createElement("button",{onClick:n.onActiveFilterClick,className:r},"Active")),!n.state.isHidden&&o.a.createElement("span",{onClick:n.onHideFiltersClick},"Hide"),n.state.isHidden&&o.a.createElement("span",{onClick:n.onShowFiltersClick},"Show"))},n}return Object(d.a)(e,t),e}(o.a.Component),nt=function(t){function e(t){var n;return Object(s.a)(this,e),(n=Object(l.a)(this,Object(u.a)(e).call(this,t))).restoreState=function(){n.props.setTasks(n.props.id)},n.nextTaskId=0,n.state={filterValue:"All"},n.onTaskAdded=function(t){n.props.addTask(n.props.id,t)},n.onFilterChanged=function(t){n.setState({filterValue:t})},n.onTaskStatusChanged=function(t,e){n.changeTask(t,{status:e})},n.onTaskTitleChanged=function(t,e){n.changeTask(t,{title:e})},n.changeTask=function(t,e){var a=n.props.tasks.find((function(e){return e.id===t})),o=Object(p.a)({},a,{},e);y(o).then((function(a){n.props.updateTask(t,e,n.props.id)}))},n.delTaskCall=function(t,e){n.props.delTaskCall(t,e)},n.render=function(){var t=n.props.tasks,e=void 0===t?[]:t;return o.a.createElement("div",{className:"todoList"},o.a.createElement(Q,{onTaskAdded:n.onTaskAdded,title:n.props.title,id:n.props.id}),o.a.createElement(tt,{id:n.props.id,onTaskStatusChanged:n.onTaskStatusChanged,onTaskTitleChanged:n.onTaskTitleChanged,delTaskCall:n.delTaskCall,tasks:e.filter((function(t){return"All"===n.state.filterValue||("Active"===n.state.filterValue?0===t.status:"Completed"===n.state.filterValue?2===t.status:void 0)}))}),o.a.createElement(et,{onFilterChanged:n.onFilterChanged,filterValue:n.state.filterValue}))},n.newTasksTitileRef=o.a.createRef(),n}return Object(d.a)(e,t),Object(c.a)(e,[{key:"componentDidMount",value:function(){this.restoreState()}}]),e}(o.a.Component),at=Object(h.b)(null,(function(t){return{addTask:function(e,n){var a=B(e,n);t(a)},updateTask:function(e,n,a){var o=function(t,e,n){return{type:D,taskId:t,obj:e,todolistId:n}}(e,n,a);t(o)},delTaskCall:function(e,n){var a=Y(e,n);t(a)},setTasks:function(e){var n=J(e);t(n)}}}))(nt),ot=n(231),rt=n(230),it=Object(rt.a)({form:"loginFree"})((function(t){return o.a.createElement("form",{onSubmit:t.handleSubmit},o.a.createElement(ot.a,{placeholder:"free@samuraijs.com",component:"input",name:"email",value:"free@samuraijs.com"}),o.a.createElement(ot.a,{placeholder:"free",component:"input",name:"password"}),o.a.createElement(ot.a,{type:"checkbox",component:"input",name:"rememberMe"}),o.a.createElement("button",null,"LOGIN"))})),st=Object(h.b)((function(t){return{isAuth:t.todoReducer.isAuth}}),{LoginThunk:function(t,e,n,a){return function(o){S(t,e,n,a).then((function(t){0===t.data.resultCode?o(W()):10===t.data.resultCode&&o(X())}))}}})((function(t){return o.a.createElement("div",null,o.a.createElement("div",null,o.a.createElement(it,{onSubmit:function(e){t.LoginThunk(e.email,e.password,e.rememberMe,e.captcha)}})))})),ct=function(t){function e(){var t,n;Object(s.a)(this,e);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(l.a)(this,(t=Object(u.a)(e)).call.apply(t,[this].concat(r)))).nextTaskId=5,n.state={todolists:[]},n.addTodoList=function(t){n.props.addTodoList(t)},n.restoreState=function(){n.props.setTodoLists()},n.render=function(){if(!n.props.isAuth)return o.a.createElement("div",null,o.a.createElement(st,null));var t=n.props.todoLists.map((function(t){return o.a.createElement(at,{id:t.id,title:t.title,tasks:t.tasks})}));return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",null,o.a.createElement(f,{addItem:n.addTodoList})),o.a.createElement("div",{className:"App"},t))},n}return Object(d.a)(e,t),Object(c.a)(e,[{key:"componentDidMount",value:function(){this.restoreState()}},{key:"componentDidUpdate",value:function(t,e){var n=t.isAuth;this.props.isAuth;this.props.isAuth!==n&&this.props.setTodoLists()}}]),e}(o.a.Component),lt=Object(h.b)((function(t){return{todoLists:t.todoReducer.todoLists,isAuth:t.todoReducer.isAuth}}),(function(t){return{addTodoList:function(e){var n=G(e);t(n)},setTodoLists:function(){t(P())}}}))(ct),ut=n(5),dt=n(101),pt=n(232),ft=Object(ut.c)({form:pt.a,todoReducer:$}),ht=Object(ut.d)(ft,Object(ut.a)(dt.a));window.store=ht;var mt=ht;i.a.render(o.a.createElement(h.a,{store:mt},o.a.createElement(lt,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()}))}},[[104,1,2]]]);
//# sourceMappingURL=main.cd83052e.chunk.js.map